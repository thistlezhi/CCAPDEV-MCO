<!DOCTYPE html>
<html>
<head>
  <title>Slot Availability</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="container">
    <h2>View Slot Availability</h2>
  
    <select id="labSelect"></select>
    <input type="date" id="dateSelect">
  
    <div class="tablescroll">
      <table id="slotsTable">
        <tr>
          <th>Time</th>
          <th>Seat</th>
          <th>Status</th>
        </tr>
      </table>
    </div>

    <!--Search Available Slots-->

    <h2>Search Available Slots</h2>
    <input type="time" id="timeSelect">
    <button onclick="search()">Search</button>

    <ul id="results"></ul>

  
    <a href="home.html"><h3>Back to Home Page</h3></a>

  </div>

  <script src="js/data.js"></script>
  <script src="js/labs.js"></script>

  <script>
  // Restrict date picker to today and the next 7 days
  const dateInput = document.getElementById('dateSelect');
  
  // Today's date will be the minimum date
  const today = new Date();
  const minDate = today.toISOString().split('T')[0];
  
  // Date 7 days from now
  const maxDate = new Date(today);
  maxDate.setDate(maxDate.getDate() + 7);
  const maxDateString = maxDate.toISOString().split('T')[0];
  
  // Min and max attributes with its respective date values
  dateInput.setAttribute('min', minDate);
  dateInput.setAttribute('max', maxDateString);
  
  // Optionally set today as the default selected date
  dateInput.value = minDate;

  // Search function
  function search() {
    const labId = Number(document.getElementById("labSelect").value);
    const date = document.getElementById("dateSelect").value;
    const time = document.getElementById("timeSelect").value;

    const lab = labs.find(l => l.id === labId);
    const results = document.getElementById("results");
    results.innerHTML = "";

    for (let seat = 1; seat <= lab.seats; seat++) {
      const taken = reservations.find(r =>
        r.labId === labId &&
        r.date === date &&
        r.time === time &&
        r.seat === seat
      );

      if (!taken) {
        const li = document.createElement("li");
        li.textContent = `Seat ${seat} is available`;
        results.appendChild(li);
      }
    }
  }



</script>

</body>
</html>
